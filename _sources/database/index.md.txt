(chapter_database)=
# TF6420 データベース

TF6420はTwinCAT上のデータをさまざまなデータベースに記録させることができるサービスソフトウェアです。データベースには主に次のタイプに分かれており、TF6420はこれらのデータベースに対応します。

SQLデータベース
    : 表形式のデータベース。SQLという共通の問い合わせ言語を用いてデータを読み書きしたり、テーブルやデータベースのメンテナンスが可能になっている。スキーマ（データの構造）をあらかじめ定義し、そのスキーマに沿ってデータを出し入れする場合はこのデータベースを用いる

NoSQLデータベース
    : KVS型
        : キーバリューストアでデータを格納。非常に高速に読み書きできるが、複雑なデータ構造は表現できない。

    : ドキュメント型
        : MongoDBなどJSON形式のツリーデータをそのまま格納できることが特徴。

    : 時系列型
        : 時系列データを格納するのに特化したデータベースです。以下の機能を備えている点です。特にIPC内の制御システムと同じストレージシステム内に格納する場合には、欠かせない機能となっています。

            * データ更新よりもデータ書込みに特化した性能
            * 一定の期間を経過したらダウンサンプリングしてデータを要約し、データサイズを削減する機能
            * 時間経過と共にテーブルサイズが肥大化して性能低下を防いだり、古いデータを削除しやすくするため、あらかじめ決まったサイズに小分けにしておく機能
            * データ種別毎に異なるサンプリング間隔を比較する際、特定の時刻に着目した際に欠損したデータを自動的に直近の値で補完する機能
            * 特にTwinCATのモーション制御のような密度の高いサイクルデータをそのまま扱うとデータ転送に過大な負担がかかるため、粗い間隔毎に平均値、中央値、最終値を集計して取り出せるダウンサンプリング機能

```{toctree}
:caption: 目次

../sql/index.md
../influxdb/index.md
../timescaledb/index.md
```